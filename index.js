// Translation system
const translations = {
    en: {
        nav: {
            home: "Home",
            about: "About Us",
            services: "Our Services",
            stories: "Success Stories",
            news: "News & Tips",
            contact: "Contact Us",
            farmManagement: "Farm Management",
            cropPlanning: "Crop Planning",
            soilHealth: "Soil Health",
            precisionFarming: "Precision Farming"
        },
        hero: {
            title: "Transform Your Farm with Expert Guidance",
            subtitle: "Professional agriculture consultancy services in Uttarakhand. From soil health to sustainable practices, we help farmers achieve maximum productivity and profitability.",
            consultationBtn: "Request Free Consultation",
            exploreBtn: "Explore Our Services"
        },
        about: {
            title: "About AgriConsult ",
            description1: "Based in Kathfori,Sirsaganj Area , we are a leading agriculture consultancy service dedicated to empowering farmers and agribusinesses across the region. With over a decade of experience in sustainable farming practices, we provide comprehensive solutions tailored to the unique challenges of  agriculture.",
            description2: "Our team of certified agricultural experts combines traditional farming wisdom with modern technology to help you achieve optimal crop yields, improve soil health, and maximize profitability while maintaining environmental sustainability.",
            happyFarmers: "Happy Farmers",
            yearsExperience: "Years Experience",
            successRate: "Success Rate"
        },
        services: {
            title: "Our Comprehensive Services",
            subtitle: "From farm planning to harvest optimization, we provide end-to-end agricultural consultancy services designed to boost your productivity and profitability.",
            farmManagement: {
                title: "Farm Management",
                description: "Comprehensive farm planning, resource optimization, and operational efficiency strategies tailored to your specific crops and land conditions."
            },
            cropPlanning: {
                title: "Crop Planning",
                description: "Strategic crop selection, rotation planning, and seasonal timing optimization based on local climate and market conditions."
            },
            soilHealth: {
                title: "Soil Health Management",
                description: "Professional soil testing, nutrient analysis, and customized fertilization programs to maintain optimal soil conditions."
            },
            precisionFarming: {
                title: "Precision Farming",
                description: "Modern technology integration including GPS mapping, drone monitoring, and data-driven farming techniques."
            },
            pestControl: {
                title: "Pest & Disease Control",
                description: "Integrated pest management strategies using eco-friendly solutions to protect crops while maintaining environmental balance."
            },
            financialPlanning: {
                title: "Financial Planning",
                description: "Agricultural loan guidance, subsidy assistance, insurance planning, and profitability analysis for sustainable growth."
            }
        },
       
        contact: {
            title: "Get Expert Consultation",
            subtitle: "Ready to transform your farming? Let's discuss your specific needs.",
            formTitle: "Request Free Consultation",
            name: "Full Name",
            phone: "Phone Number",
            email: "Email Address",
            location: "Farm Location",
            farmSize: "Farm Size (Acres)",
            service: "Service Interest",
            details: "Additional Details",
            submit: "Send Consultation Request",
            office: "Visit Our Office",
            address: "Address",
            hours: "Office Hours"
        },
        footer: {
            description: "Empowering farmers across Uttarakhand with expert agricultural guidance and sustainable farming solutions.",
            quickLinks: "Quick Links",
            services: "Services",
            contactInfo: "Contact Info",
            copyright: "© 2015 AgriConsult Uttarakhand. All rights reserved.",
            privacy: "Privacy Policy",
            terms: "Terms of Service"
        }
    },
    hi: {
        nav: {
            home: "होम",
            about: "हमारे बारे में",
            services: "हमारी सेवाएं",
            stories: "सफलता की कहानियां",
            news: "समाचार और सुझाव",
            contact: "संपर्क करें",
            farmManagement: "फार्म प्रबंधन",
            cropPlanning: "फसल योजना",
            soilHealth: "मिट्टी का स्वास्थ्य",
            precisionFarming: "प्रिसिजन फार्मिंग"
        },
        hero: {
            title: "विशेषज्ञ मार्गदर्शन के साथ अपने खेत को बदलें",
            subtitle: " में पेशेवर कृषि सलाहकार सेवाएं। मिट्टी के स्वास्थ्य से लेकर टिकाऊ प्रथाओं तक, हम किसानों को अधिकतम उत्पादकता और लाभप्रदता प्राप्त करने में मदद करते हैं।",
            consultationBtn: "निःशुल्क परामर्श का अनुरोध करें",
            exploreBtn: "हमारी सेवाओं का अन्वेषण करें"
        },
        about: {
            title: "एग्रीकंसल्ट के बारे में",
            description1: "कठफोरी, फिरोजाबाद, उत्तर प्रदेश में स्थित हम एक अग्रणी कृषि सलाहकार सेवा हैं जो पूरे क्षेत्र में किसानों और कृषि व्यवसायों को सशक्त बनाने के लिए समर्पित है। टिकाऊ खेती प्रथाओं में एक दशक से अधिक के अनुभव के साथ, हम हिमालयी कृषि की अनूठी चुनौतियों के अनुकूल व्यापक समाधान प्रदान करते हैं।",
            description2: "प्रमाणित कृषि विशेषज्ञों की हमारी टीम पारंपरिक खेती की बुद्धि को आधुनिक तकनीक के साथ जोड़ती है ताकि आपको इष्टतम फसल उत्पादन प्राप्त करने, मिट्टी के स्वास्थ्य में सुधार करने और पर्यावरणीय स्थिरता बनाए रखते हुए लाभप्रदता को अधिकतम करने में मदद मिल सके।",
            happyFarmers: "खुश किसान",
            yearsExperience: "साल का अनुभव",
            successRate: "सफलता दर"
        },
        services: {
            title: "हमारी व्यापक सेवाएं",
            subtitle: "खेत की योजना से लेकर फसल अनुकूलन तक, हम आपकी उत्पादकता और लाभप्रदता बढ़ाने के लिए डिज़ाइन की गई अंत-से-अंत कृषि सलाहकार सेवाएं प्रदान करते हैं।",
            farmManagement: {
                title: "फार्म प्रबंधन",
                description: "आपकी विशिष्ट फसलों और भूमि की स्थितियों के अनुकूल व्यापक खेत योजना, संसाधन अनुकूलन और परिचालन दक्षता रणनीतियां।"
            },
            cropPlanning: {
                title: "फसल योजना",
                description: "स्थानीय जलवायु और बाजार की स्थितियों के आधार पर रणनीतिक फसल चयन, रोटेशन योजना और मौसमी समय अनुकूलन।"
            },
            soilHealth: {
                title: "मिट्टी स्वास्थ्य प्रबंधन",
                description: "इष्टतम मिट्टी की स्थिति बनाए रखने के लिए पेशेवर मिट्टी परीक्षण, पोषक तत्व विश्लेषण और अनुकूलित उर्वरीकरण कार्यक्रम।"
            },
            precisionFarming: {
                title: "प्रिसिजन फार्मिंग",
                description: "जीपीएस मैपिंग, ड्रोन मॉनिटरिंग और डेटा-संचालित खेती तकनीकों सहित आधुनिक तकनीक एकीकरण।"
            },
            pestControl: {
                title: "कीट और रोग नियंत्रण",
                description: "पर्यावरणीय संतुलन बनाए रखते हुए फसलों की सुरक्षा के लिए पर्यावरण-अनुकूल समाधानों का उपयोग करने वाली एकीकृत कीट प्रबंधन रणनीतियां।"
            },
            financialPlanning: {
                title: "वित्तीय योजना",
                description: "टिकाऊ विकास के लिए कृषि ऋण मार्गदर्शन, सब्सिडी सहायता, बीमा योजना और लाभप्रदता विश्लेषण।"
            }
        },
        testimonials: {
            title: "सफलता की कहानियां",
            subtitle: "उत्तर प्रदेश भर के किसानों के वास्तविक परिणाम"
        },
        news: {
            title: "समाचार और विशेषज्ञ सुझाव",
            subtitle: "नवीनतम कृषि अंतर्दृष्टि और सर्वोत्तम प्रथाओं के साथ अपडेट रहें",
            viewAll: "सभी लेख देखें"
        },
        contact: {
            title: "विशेषज्ञ परामर्श प्राप्त करें",
            subtitle: "अपनी खेती को बदलने के लिए तैयार हैं? आइए आपकी विशिष्ट आवश्यकताओं पर चर्चा करें।",
            formTitle: "निःशुल्क परामर्श का अनुरोध करें",
            name: "पूरा नाम",
            phone: "फोन नंबर",
            email: "ईमेल पता",
            location: "खेत का स्थान",
            farmSize: "खेत का आकार (एकड़)",
            service: "सेवा रुचि",
            details: "अतिरिक्त विवरण",
            submit: "परामर्श अनुरोध भेजें",
            office: "हमारे कार्यालय आएं",
            address: "पता",
            hours: "कार्यालय समय"
        },
        footer: {
            description: "विशेषज्ञ कृषि मार्गदर्शन और टिकाऊ खेती समाधानों के साथ उत्तर प्रदेश भर के किसानों को सशक्त बनाना।",
            quickLinks: "त्वरित लिंक",
            services: "सेवाएं",
            contactInfo: "संपर्क जानकारी",
            copyright: "© 2015 एग्रीकंसल्ट सभी अधिकार सुरक्षित।",
            privacy: "गोपनीयता नीति",
            terms: "सेवा की शर्तें"
        }
    }
};

// Sample data
const testimonialsData = [
    {
        id: 1,
        name: "Rajesh Kumar",
        location: "Kathfori, Uttar Pradesh",
        quote: "AgriConsult helped me increase my apple yield by 40% in just one season. Their soil management advice was game-changing for my orchard.",
        improvement: "+40% Yield Increase",
        rating: 5,
        imageUrl: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150"
    },
    {
        id: 2,
        name: "Priya Sharma",
        location: "Sirsaganj, Uttar Pradesh",
        quote: "The precision farming techniques they introduced saved me 30% on water usage while maintaining the same rice production levels.",
        improvement: "-30% Water Usage",
        rating: 5,
        imageUrl: "https://images.unsplash.com/photo-1544725176-7c40e5a71c5e?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150"
    },
    {
        id: 3,
        name: "Mohan Singh",
        location: "Jaswantnagar, Uttar Pradesh",
        quote: "Their sustainable farming practices helped me get organic certification and now I sell my vegetables at premium prices in the market.",
        improvement: "Organic Certified",
        rating: 5,
        imageUrl: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=150&h=150"
    }
];

const newsData = [
    {
        id: 1,
        title: "How Drones Are Revolutionizing Farming in Uttarakhand",
        excerpt: "Discover how modern drone technology is helping farmers monitor crops, assess soil health, and optimize irrigation...",
        category: "Technology",
        imageUrl: "https://images.unsplash.com/photo-1586771107445-d3ca888129ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=250",
        createdAt: "2023-12-15"
    },
    {
        id: 2,
        title: "5 Smart Water Conservation Techniques for Mountain Farming",
        excerpt: "Learn effective strategies to reduce water consumption while maintaining optimal crop growth in challenging terrain...",
        category: "Water Management",
        imageUrl: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=250",
        createdAt: "2023-12-10"
    },
    {
        id: 3,
        title: "Complete Guide to Organic Certification in India",
        excerpt: "Step-by-step process to get your farm organically certified and access premium markets for better profits...",
        category: "Organic Farming",
        imageUrl: "https://images.unsplash.com/photo-1530836369250-ef72a3f5cda8?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=250",
        createdAt: "2023-12-05"
    }
];

// Global state
let currentLanguage = 'en';
let mobileMenuOpen = false;

// Initialize application
document.addEventListener('DOMContentLoaded', function () {
    initializeLanguage();
    initializeNavigation();
    initializeScrollEffects();
    loadTestimonials();
    loadNews();
    initializeContactForm();
    initializeTranslations();
});

// Language management
function initializeLanguage() {
    const savedLanguage = localStorage.getItem('language');
    if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'hi')) {
        currentLanguage = savedLanguage;
    }
    updateLanguageToggle();
    updateTranslations();
}

function toggleLanguage() {
    currentLanguage = currentLanguage === 'en' ? 'hi' : 'en';
    localStorage.setItem('language', currentLanguage);
    updateLanguageToggle();
    updateTranslations();
}

function updateLanguageToggle() {
    const langText = document.getElementById('langText');
    if (langText) {
        langText.textContent = currentLanguage === 'en' ? 'EN | हिं' : 'हिं | EN';
    }
}

function initializeTranslations() {
    const langToggle = document.getElementById('langToggle');
    if (langToggle) {
        langToggle.addEventListener('click', toggleLanguage);
    }
}

function updateTranslations() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        const translation = getNestedProperty(translations[currentLanguage], key);
        if (translation) {
            if (element.tagName === 'INPUT' && element.type !== 'button' && element.type !== 'submit') {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        }
    });
}

function getNestedProperty(obj, path) {
    return path.split('.').reduce((current, key) => {
        return current && current[key] !== undefined ? current[key] : null;
    }, obj);
}

// Navigation
function initializeNavigation() {
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const navMenu = document.getElementById('nav-menu');

    if (mobileMenuToggle && navMenu) {
        mobileMenuToggle.addEventListener('click', toggleMobileMenu);
    }

    // Smooth scroll for navigation links
    const navLinks = document.querySelectorAll('a[href^="#"]');
    navLinks.forEach(link => {
        link.addEventListener('click', function (e) {
            e.preventDefault();
            const targetId = this.getAttribute('href');
            scrollToSection(targetId.replace('#', ''));
            closeMobileMenu();
        });
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', function (e) {
        if (mobileMenuOpen && !navMenu.contains(e.target) && !mobileMenuToggle.contains(e.target)) {
            closeMobileMenu();
        }
    });
}

function toggleMobileMenu() {
    const navMenu = document.getElementById('nav-menu');
    const menuIcon = document.querySelector('#mobileMenuToggle i');

    mobileMenuOpen = !mobileMenuOpen;

    if (navMenu) {
        navMenu.classList.toggle('active', mobileMenuOpen);
    }

    if (menuIcon) {
        menuIcon.className = mobileMenuOpen ? 'fas fa-times' : 'fas fa-bars';
    }
}

function closeMobileMenu() {
    const navMenu = document.getElementById('nav-menu');
    const menuIcon = document.querySelector('#mobileMenuToggle i');

    mobileMenuOpen = false;

    if (navMenu) {
        navMenu.classList.remove('active');
    }

    if (menuIcon) {
        menuIcon.className = 'fas fa-bars';
    }
}

function scrollToSection(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
        const navbarHeight = document.querySelector('.navbar').offsetHeight;
        const elementPosition = element.offsetTop - navbarHeight;
        window.scrollTo({
            top: elementPosition,
            behavior: 'smooth'
        });
    }
}

// Scroll effects
function initializeScrollEffects() {
    const scrollTopBtn = document.getElementById('scrollTopBtn');

    window.addEventListener('scroll', function () {
        // Show/hide scroll top button
        if (scrollTopBtn) {
            if (window.pageYOffset > 300) {
                scrollTopBtn.classList.add('visible');
            } else {
                scrollTopBtn.classList.remove('visible');
            }
        }

        // Add navbar background on scroll
        const navbar = document.querySelector('.navbar');
        if (navbar) {
            if (window.pageYOffset > 50) {
                navbar.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';
                navbar.style.backdropFilter = 'blur(10px)';
            } else {
                navbar.style.backgroundColor = 'var(--white)';
                navbar.style.backdropFilter = 'none';
            }
        }
    });

    if (scrollTopBtn) {
        scrollTopBtn.addEventListener('click', function () {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    }
}

// Load testimonials
function loadTestimonials() {
    const container = document.getElementById('testimonialsGrid');
    if (!container) return;

    container.innerHTML = '';

    testimonialsData.forEach(testimonial => {
        const testimonialElement = createTestimonialCard(testimonial);
        container.appendChild(testimonialElement);
    });
}

function createTestimonialCard(testimonial) {
    const card = document.createElement('div');
    card.className = 'testimonial-card';

    const stars = Array(testimonial.rating).fill('<i class="fas fa-star star"></i>').join('');

    card.innerHTML = `
        <div class="testimonial-header">
            <img src="${testimonial.imageUrl}" alt="${testimonial.name}" class="testimonial-avatar">
            <div>
                <h4 class="testimonial-name">${testimonial.name}</h4>
                <p class="testimonial-location">${testimonial.location}</p>
            </div>
        </div>
        <div class="testimonial-rating">${stars}</div>
        <p class="testimonial-quote">"${testimonial.quote}"</p>
        <div class="testimonial-improvement">${testimonial.improvement}</div>
    `;

    return card;
}

// Load news articles
function loadNews() {
    const container = document.getElementById('newsGrid');
    if (!container) return;

    container.innerHTML = '';

    newsData.forEach(article => {
        const articleElement = createNewsCard(article);
        container.appendChild(articleElement);
    });
}

function createNewsCard(article) {
    const card = document.createElement('article');
    card.className = 'news-card';

    const date = new Date(article.createdAt).toLocaleDateString();

    card.innerHTML = `
        <img src="${article.imageUrl}" alt="${article.title}" class="news-image">
        <div class="news-content">
            <div class="news-meta">
                <i class="fas fa-calendar"></i>
                <span>${date}</span>
                <span>•</span>
                <span>${article.category}</span>
            </div>
            <h3 class="news-title">${article.title}</h3>
            <p class="news-excerpt">${article.excerpt}</p>
            <button class="news-link">
                Read More <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    `;

    return card;
}

// Contact form
function initializeContactForm() {
    const form = document.getElementById('consultationForm');
    if (!form) return;

    form.addEventListener('submit', handleFormSubmission);
}

function handleFormSubmission(e) {
    e.preventDefault();

    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData);

    // Basic validation
    if (!data.name || !data.email || !data.phone) {
        showNotification('Please fill in all required fields.', 'error');
        return;
    }

    if (!isValidEmail(data.email)) {
        showNotification('Please enter a valid email address.', 'error');
        return;
    }

    // Simulate form submission
    showNotification('Sending your consultation request...', 'info');

    setTimeout(() => {
        showNotification('Success! Your consultation request has been submitted. We will contact you within 24 hours.', 'success');
        e.target.reset();
    }, 2000);
}

function isValidEmail(email) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
}

function showNotification(message, type = 'info') {
    // Remove existing notifications
    const existingNotifications = document.querySelectorAll('.notification');
    existingNotifications.forEach(notification => notification.remove());

    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;

    // Add styles
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background-color: ${type === 'success' ? 'var(--agri-secondary)' : type === 'error' ? '#ef4444' : 'var(--agri-primary)'};
        color: white;
        padding: 1rem 2rem;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow-lg);
        z-index: 10000;
        max-width: 400px;
        animation: slideIn 0.3s ease-out;
    `;

    document.body.appendChild(notification);

    // Remove notification after 5 seconds
    setTimeout(() => {
        notification.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => {
            if (notification.parentNode) {
                notification.remove();
            }
        }, 300);
    }, 5000);
}
/*
// Add CSS animations
const style = document.createElement('style');
style.textContent = `
    @keyframes slideIn {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }
    
    @keyframes slideOut {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
    
    .notification {
        font-family: var(--font-family);
        font-size: 0.9rem;
        line-height: 1.4;
    }
`;
document.head.appendChild(style);

// Intersection Observer for animations
function initializeAnimations() {
    const animatedElements = document.querySelectorAll('.service-card, .testimonial-card, .news-card, .about-content, .about-image');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = 'fadeInUp 0.6s ease-out';
            }
        });
    }, {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    });

    animatedElements.forEach(element => {
        observer.observe(element);
    });
}

// Add fadeInUp animation
const animationStyle = document.createElement('style');
animationStyle.textContent = `
    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    .service-card,
    .testimonial-card,
    .news-card,
    .about-content,
    .about-image {
        opacity: 0;
    }
`;
document.head.appendChild(animationStyle);

// Initialize animations when DOM is loaded
document.addEventListener('DOMContentLoaded', function () {
    setTimeout(initializeAnimations, 500);
});

// Utility functions
function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
*/
// Export functions for external use
window.scrollToSection = scrollToSection;
window.toggleLanguage = toggleLanguage;